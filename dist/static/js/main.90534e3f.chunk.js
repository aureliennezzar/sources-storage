(this["webpackJsonpsources-storage"]=this["webpackJsonpsources-storage"]||[]).push([[0],{33:function(e,t,n){e.exports=n(58)},38:function(e,t,n){},39:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(29),o=n.n(c),l=(n(38),n(10)),i=(n(39),n(31)),u=n(13),s=n.n(u);s.a.initializeApp({apiKey:"AIzaSyAcvn9Ovp6VDSDMW8WiXu27hzvdgZIuh3U",authDomain:"sources-storage.firebaseapp.com",databaseURL:"https://sources-storage.firebaseio.com",projectId:"sources-storage",storageBucket:"sources-storage.appspot.com",messagingSenderId:"662099457205",appId:"1:662099457205:web:ef77f8dd882d1539cc3afc",measurementId:"G-KS78HV5SZT"});s.a.auth;var m=s.a.firestore(),f=(s.a.storage().ref(),n(50),function(e){var t=e.titre,n=e.lien,c=e.from,o=e.date,i=Object(a.useState)(""),u=Object(l.a)(i,2),s=u[0],m=u[1],f=Object(a.useState)(!1),p=Object(l.a)(f,2),h=p[0],d=p[1];Object(a.useLayoutEffect)((function(){var e=new Date(o),t=(new Date,("0"+e.getDate()).slice(-2)),n=("0"+(e.getMonth()+1)).slice(-2),a=e.getFullYear();m("".concat(t,"/").concat(n,"/").concat(a))}),[]);return r.a.createElement("article",{onMouseUp:function(e){h&&(window.open(n,"_blank"),e.currentTarget.className="")},onMouseDown:function(e){d(!0),e.currentTarget.className="articleClick"},onMouseLeave:function(e){d(!1),e.currentTarget.className=""}},r.a.createElement("span",{style:{alignSelf:"flex-start"}},"\u201c"),r.a.createElement("p",{className:"article-name"},function(e){var t=e.split("[")[2].split("]]>")[0],n=0,a=!1,r=t.split(" ").map((function(e){if((n+=e.length+1)<=100)return e;a=!0})).join(" ").trim();return a?r+"...":r}(t)),r.a.createElement("span",{style:{alignSelf:"flex-end"}},"\u201d"),r.a.createElement("div",{className:"article-footer"},r.a.createElement("p",null,c),r.a.createElement("p",null,s)))}),p=(n(51),function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){m.collection("rss").onSnapshot((function(e){c([]),e.forEach((function(e){var t=e.data(),n=t.lien,a=t.nom;fetch("https://cors-anywhere.herokuapp.com/"+n).then((function(e){return e.text()})).then((function(e){return(new window.DOMParser).parseFromString(e,"text/xml")})).then((function(e){e.querySelectorAll("item").forEach((function(e){var t=e.querySelector("title").innerHTML,n=e.querySelector("link").innerHTML,r=e.querySelector("pubDate").innerHTML;c((function(e){return[].concat(Object(i.a)(e),[{titre:t,lien:n,nom:a,date:r}])}))}))}))}))}))}),[]),r.a.createElement("div",{className:"articles"},n.map((function(e,t){var n=e.titre,a=e.lien,c=e.nom,o=e.date;return r.a.createElement(f,{key:t,titre:n,lien:a,from:c,date:o})})))}),h=n(21),d=n(17),g=(n(52),function(){var e=Object(a.useState)({lien:"",nom:""}),t=Object(l.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)({lien:!1,nom:!1}),i=Object(l.a)(o,2),u=i[0],s=i[1],f=n.lien,p=n.nom,g=function(e){s({lien:!1,nom:!1}),c(Object(d.a)(Object(d.a)({},n),{},Object(h.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{className:"inputs"},r.a.createElement("div",null,r.a.createElement("input",{className:u.lien?"error":null,type:"text",name:"lien",onChange:g,placeholder:"Lien RSS ",value:f})),r.a.createElement("div",null,r.a.createElement("input",{className:u.nom?"error":null,type:"text",name:"nom",onChange:g,placeholder:"M\xe9dia ",value:p})),r.a.createElement("button",{onClick:function(){n.lien.length>0&&n.nom.length>0?function(e){var t=new DOMParser,n="https://cors-anywhere.herokuapp.com/"+"http://validator.w3.org/feed/check.cgi?url=".concat(e,"&output=soap12");return new Promise((function(e,a){var r=new XMLHttpRequest;r.open("GET",n,!0),r.onload=function(){var n=t.parseFromString(this.response,"text/xml");null===n.querySelector("faultcode")?e(n.querySelector("validity").innerHTML):e("false")},r.send()}))}(f).then((function(e){JSON.parse(e)?(m.collection("rss").add({lien:f,nom:p}),c(Object(d.a)(Object(d.a)({},n),{},{lien:"",nom:""})),alert("FLUX RSS AJOUT\xc9")):(s({lien:!0,nom:!1}),alert("FLUX RSS NON VALIDE"))})):s(function(e){var t=[e.lien,e.nom];return t.forEach((function(e,n){0===e.length?t[n]=!0:t[n]=!1})),{lien:t[0],nom:t[1]}}(n))}},r.a.createElement("span",null,"+")))}),E=n(32),v=n(2);function b(e){var t=e.component,n=e.authenticated,a=Object(E.a)(e,["component","authenticated"]);return r.a.createElement(v.b,Object.assign({},a,{render:function(e){return!1===n?r.a.createElement(t,e):r.a.createElement(v.a,{to:{pathname:"/feed"}})}}))}var S=n(23),O=(n(57),function(){return r.a.createElement("section",{className:"feedPage"},r.a.createElement(g,null),r.a.createElement(p,null))}),j=function(){return r.a.createElement("section",{className:"ressourcesPage"})};var w=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){Object(u.auth)().onAuthStateChanged((function(e){e&&c(!0)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"App"},r.a.createElement("header",null,r.a.createElement("h1",null,"Welcome to Sources Storage"))),r.a.createElement(S.a,null,r.a.createElement(v.d,null,r.a.createElement(b,{exact:!0,path:"/",authenticated:n,component:O}),r.a.createElement(b,{path:"/feed",authenticated:n,component:O}),r.a.createElement(b,{path:"/ressources",authenticated:n,component:j}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.90534e3f.chunk.js.map